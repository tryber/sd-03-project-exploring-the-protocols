const net = require('net');
const Response = require('./response');

const server = net.createServer((socket) => {
  socket.on('data', (data) => {
    console.log(data.toString());
    const response = new Response('\n<h1 data-testid="server">Protocolos</h1>');
    const show = response.show();
    socket.write(show);
    socket.end();
  });
});

const { PORT = 8085 } = process.env;

server.listen(PORT, () => console.log(`Ouvindo na porta ${PORT}`));
